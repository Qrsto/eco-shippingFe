
<div class="col-md-12">
  <div class="card card-container">
    <img id="profile-img" src="https://i.imgur.com/4DIPv5k.png" class="profile-img-card" />
    <form name="form" (ngSubmit)="formOrder.form.valid && onSubmit()" #f="ngForm" novalidate>
      <div class="form-group">
        <label for="indirizzoPartenza">Indirizzo di partenza: </label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="formOrder.indirizzoPartenza" required
          #indirizzoPartenza="ngModel" [ngClass]="{ 'is-invalid': f.submitted && indirizzoPartenza.errors }" />
        <div *ngIf="indirizzoPartenza.errors && formOrder.submitted" class="invalid-feedback">
          Indirizzo Errato!
        </div>
      </div>
      <div class="form-group">
        <label for="indirizzoDestinazione">Indirizzo di consegna: </label>
        <input type="text" class="form-control" name="indirizzoDestinazione" [(ngModel)]="formOrder.indirizzoDestinazione"
          required #indirizzoDestinazione="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && indirizzoDestinazione.errors }" />
        <div *ngIf="indirizzoDestinazione.errors && f.submitted" class="invalid-feedback">
          Indirizzo di consegna errato!
        </div>
      </div>
      <div class="form-group">
        <label for="volumeSpedizione">Volume spedizione:</label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="formOrder.volumeSpedizione" required
          #volumeSpedizione="ngModel" [ngClass]="{ 'is-invalid': f.submitted && volumeSpedizione.errors }" />
        <div *ngIf="volumeSpedizione.errors && f.submitted" class="invalid-feedback">
          Volume obbligatorio!
        </div>
      </div>
      <div class="form-group">
        <label for="pesoSpedizione">Peso del pacco in kg: </label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="formOrder.pesoSpedizione" required
          #pesoSpedizione="ngModel" [ngClass]="{ 'is-invalid': f.submitted && pesoSpedizione.errors }" />
        <div *ngIf="pesoSpedizione.errors && f.submitted" class="invalid-feedback">
          Peso della spedizione obbligatorio!
        </div>
      </div>
      <div class="form-group">
        <label for="numTelefonoDestinatario">Numero di telefono: </label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="formOrder.numTelefonoDestinatario" required
          #numTelefonoDestinatario="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && numTelefonoDestinatario.errors }" />
        <div *ngIf="numTelefonoDestinatario.errors && f.submitted" class="invalid-feedback">
          Numero di telefono obbligatorio
        </div>
      </div>

      

      <fieldset class="row mb-3">
        <legend class="col-form-label">In che momento della giornata vorresti avvenisse il tuo ordine? </legend>
        <div class="col-sm-10">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="gridRadios" id="fasciaOrariaMATTINA"
              value="MATTINA" [(ngModel)]="formOrder.fasciaOraria.MATTINA" required
              #fasciaOraria="ngModel" /> 
              <label class="form-check-label" for="gridRadios1">
              Mattina
              </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="gridRadios" id="fasciaOrariaPOMERIGGIO" value="POMERIGGIO"
              [(ngModel)]="formOrder.fasciaOraria.POMERIGGIO" required #fasciaOraria="ngModel" />
            <label class="fasciaOrariaPOMERIGGIO" for="gridRadios2">
              Pomeriggio
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="gridRadios" id="fasciaOrariaSERA" value="SERA" 
            [(ngModel)]="formOrder.fasciaOraria.SERA" required #fasciaOraria="ngModel"/>
            <label class="fasciaOrariaSERA" for="gridRadios2">
              Sera
            </label>
          </div>
        </div>
      </fieldset>
      
<!--
  <div class="form-group">
        <label for="fasciaOraria">In che momento della giornata vorresti avvenisse il tuo ordine? </label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="form.fasciaOraria" required
          #fasciaOraria="ngModel" [ngClass]="{ 'is-invalid': f.submitted && fasciaOraria.errors }" />
        <div *ngIf="fasciaOraria.errors && f.submitted" class="invalid-feedback">
          Username is required!
        </div>
      </div>
-->
      
      <div class="form-group">
        <label for="noteConsegna">Descrivici la tua consegna: </label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="formOrder.noteConsegna" required
          #noteConsegna="ngModel" [ngClass]="{ 'is-invalid': f.submitted && noteConsegna.errors }" />
        <div *ngIf="noteConsegna.errors && f.submitted" class="invalid-feedback">
          Username is required!
        </div>
      </div>
      <div class="form-group">
        <label for="costoFinale">Totale costo della tua cosnegna: </label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="formOrder.costoFinale" required
          #costoFinale="ngModel" [ngClass]="{ 'is-invalid': f.submitted && costoFinale.errors }" />
        <div *ngIf="costoFinale.errors && f.submitted" class="invalid-feedback">
          ------
        </div>
      </div>
      <div class="form-group">
        <label for="longitudinePartenza">Longitudine partenza</label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="formOrder.longitudinePartenza" required
          #longitudinePartenza="ngModel" [ngClass]="{ 'is-invalid': f.submitted && longitudinePartenza.errors }" />
        <div *ngIf="longitudinePartenza.errors && f.submitted" class="invalid-feedback">
          Username is required!
        </div>
      </div>
      <div class="form-group">
        <label for="latitudinePartenza">Latitudine partenza: </label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="formOrder.latitudinePartenza" required
          #latitudinePartenza="ngModel" [ngClass]="{ 'is-invalid': f.submitted && latitudinePartenza.errors }" />
        <div *ngIf="latitudinePartenza.errors && f.submitted" class="invalid-feedback">
          Username is required!
        </div>
      </div>
      <div class="form-group">
        <label for="longitudineDestinazione">Longitudine Destinazione:</label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="formOrder.longitudineDestinazione" required
          #longitudineDestinazione="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && longitudineDestinazione.errors }" />
        <div *ngIf="longitudineDestinazione.errors && f.submitted" class="invalid-feedback">
          Username is required!
        </div>
      </div>
      <div class="form-group">
        <label for="latitudineDestinazione">latitudine destinazione: </label>
        <input type="text" class="form-control" name="indi" [(ngModel)]="formOrder.latitudineDestinazione" required
          #latitudineDestinazione="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && latitudineDestinazione.errors }" />
        <div *ngIf="latitudineDestinazione.errors && f.submitted" class="invalid-feedback">
          Username is required!
        </div>
      </div>
      <!--
          API PER METODO DI PAGAMENTO 
        -->
        <fieldset class="row mb-3">
          <legend class="col-form-label">Metodo di pagamento</legend>
          <div class="col-sm-10">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="gridRadios" id="metodoPagamentoCONTANTI"
                value="CONTANTI" checked [(ngModel)]="formOrder.metodoPagamento.CONTANTI" required
                #metodoPagamento="ngModel" />
              <label class="form-check-label" for="gridRadios1">
                Contanti
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="gridRadios" id="metodoPagamentoCC" value="CC"
                [(ngModel)]="formOrder.metodoPagamento.CC" required #metodoPagamento="ngModel" />
              <label class="metodoPagamentoCC" for="gridRadios2">
                Carta di debito
              </label>
            </div>
          </div>
        </fieldset>
  
        <!-- DA TESTARE USARE QUESTO SE NON FUNGE ""RADIO"
    <div class="form-group">
            <label for="metodoPagamento">Metodo di pagamento : </label>
            <input
              type="text"
              class="form-control"
              name="indi"
              [(ngModel)]="form.metodoPagamento"
              required
              #metodoPagamento="ngModel"
              [ngClass]="{ 'is-invalid': f.submitted && metodoPagamento.errors }"
            />
            <div *ngIf="metodoPagamento.errors && f.submitted" class="invalid-feedback">
              Username is required!
            </div>
          </div>

          <app-pagamento [ordine]="formOrder"></app-pagamento>
  -->

 

      <br>
      <div class="form-group">
        <button class="btn btn-primary btn-block" (onclick)="goToPayment()">
          Salva e vai al pagamento
          
        </button>
      </div>
      <div class="form-group">
        <div *ngIf="f.submitted && isCreateOrderFailed" class="alert alert-danger" role="alert">
          
          Login failed: {{ errorMessage }}
        </div>
      </div>


    </form>
    <div class="alert alert-success" *ngIf="isSuccessful">
      Perfetto
    </div>


  </div>
</div>